const Curl = require("./curl_wrapper").Curl;

describe("Filter function", () => {
  const curlConnectionTimeout = 2,
    maxTimeout = 2,
    curlVerbose = false,
    curlInsecure = true,
    curlWithHeader = true,
    logEverything = false;
  let curl = new Curl(
    null,
    curlVerbose,
    logEverything,
    curlInsecure,
    curlWithHeader,
    curlConnectionTimeout,
    maxTimeout
  );
  const apiRoot = "https://192.168.33.10:5021";

  beforeEach(() => {});

  test("GET nfprofile", async (done) => {
    curl.Command = `curl -X GET "${apiRoot}/nf-settings/v1/nfprofile" -H "accept: application/json"`;
    curl.commandSpawn().then((d) => {
      expect(curl.Response.StatusCode).toEqual(200);
      done();
    }, done);
  });

  test("PATCH nfprofile", async (done) => {
    curl.Command = `curl -X PATCH "${apiRoot}/nf-settings/v1/nfprofile" -H "accept: application/json" -H "Content-Type: application/json-patch+json" -d "{\"path\":\"heartBeatTimer\",\"value\":\"12\"}"`;
    curl.commandSpawn().then((sout) => {
      expect(curl.Response.StatusCode).toEqual(200);
      done();
    }, done);
  });

  test("PUT nfprofile", async (done) => {
    const command = `curl -X PUT "${apiRoot}/nf-settings/v1/nfprofile" -H "accept: application/json" -H "Content-Type: application/json" -d "{\"nfInstanceId\":\"3fa85f64-5717-4562-b3fc-2c963f66afa6\",\"heartBeatTimer\":0,\"plmnList\":[{\"mcc\":\"string\",\"mnc\":\"string\"}],\"sNssais\":[{\"sst\":0,\"sd\":\"string\"}],\"perPlmnSnssaiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"sNssaiList\":[{\"sst\":0,\"sd\":\"string\"}]}],\"nsiList\":[\"string\"],\"fqdn\":\"string\",\"interPlmnFqdn\":\"string\",\"ipv4Addresses\":[\"198.51.100.1\"],\"ipv6Addresses\":[\"2001:db8:85a3::8a2e:370:7334\"],\"allowedPlmns\":[{\"mcc\":\"string\",\"mnc\":\"string\"}],\"allowedNfTypes\":[\"NRF\",\"string\"],\"allowedNfDomains\":[\"string\"],\"allowedNssais\":[{\"sst\":0,\"sd\":\"string\"}],\"priority\":0,\"capacity\":0,\"load\":0,\"locality\":\"string\",\"udrInfo\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"externalGroupIdentifiersRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"supportedDataSets\":[\"SUBSCRIPTION\",\"string\"]},\"udmInfo\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"externalGroupIdentifiersRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"routingIndicators\":[\"string\"]},\"ausfInfo\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"routingIndicators\":[\"string\"]},\"amfInfo\":{\"amfSetId\":\"string\",\"amfRegionId\":\"string\",\"guamiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"taiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tac\":\"string\"}],\"taiRangeList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tacRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]}],\"backupInfoAmfFailure\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"backupInfoAmfRemoval\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"n2InterfaceAmfInfo\":{\"ipv4EndpointAddress\":[\"198.51.100.1\"],\"ipv6EndpointAddress\":[\"2001:db8:85a3::8a2e:370:7334\"],\"amfName\":\"string\"}},\"smfInfo\":{\"sNssaiSmfInfoList\":[{\"sNssai\":{\"sst\":0,\"sd\":\"string\"},\"dnnSmfInfoList\":[{\"dnn\":\"string\"}]}],\"taiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tac\":\"string\"}],\"taiRangeList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tacRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]}],\"pgwFqdn\":\"string\",\"accessType\":[\"3GPP_ACCESS\"]},\"upfInfo\":{\"sNssaiUpfInfoList\":[{\"sNssai\":{\"sst\":0,\"sd\":\"string\"},\"dnnUpfInfoList\":[{\"dnn\":\"string\",\"dnaiList\":[\"string\"],\"pduSessionTypes\":[\"IPV4\",\"string\"]}]}],\"smfServingArea\":[\"string\"],\"interfaceUpfInfoList\":[{\"ipv4EndpointAddresses\":[\"198.51.100.1\"],\"ipv6EndpointAddresses\":[\"2001:db8:85a3::8a2e:370:7334\"],\"endpointFqdn\":\"string\",\"networkInstance\":\"string\"}],\"iwkEpsInd\":false,\"pduSessionTypes\":[\"IPV4\",\"string\"]},\"pcfInfo\":{\"dnnList\":[\"string\"],\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"rxDiamHost\":\"string\",\"rxDiamRealm\":\"string\"},\"bsfInfo\":{\"dnnList\":[\"string\"],\"ipDomainList\":[\"string\"],\"ipv4AddressRanges\":[{\"start\":\"198.51.100.1\",\"end\":\"198.51.100.1\"}],\"ipv6PrefixRanges\":[{\"start\":\"2001:db8:abcd:12::0/64\",\"end\":\"2001:db8:abcd:12::0/64\"}]},\"chfInfo\":{\"supiRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"plmnRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]},\"nrfInfo\":{\"servedUdrInfo\":{\"additionalProp1\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"externalGroupIdentifiersRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"supportedDataSets\":[\"SUBSCRIPTION\",\"string\"]},\"additionalProp2\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"externalGroupIdentifiersRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"supportedDataSets\":[\"SUBSCRIPTION\",\"string\"]},\"additionalProp3\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"externalGroupIdentifiersRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"supportedDataSets\":[\"SUBSCRIPTION\",\"string\"]}},\"servedUdmInfo\":{\"additionalProp1\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"externalGroupIdentifiersRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"routingIndicators\":[\"string\"]},\"additionalProp2\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"externalGroupIdentifiersRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"routingIndicators\":[\"string\"]},\"additionalProp3\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"externalGroupIdentifiersRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"routingIndicators\":[\"string\"]}},\"servedAusfInfo\":{\"additionalProp1\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"routingIndicators\":[\"string\"]},\"additionalProp2\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"routingIndicators\":[\"string\"]},\"additionalProp3\":{\"groupId\":\"string\",\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"routingIndicators\":[\"string\"]}},\"servedAmfInfo\":{\"additionalProp1\":{\"amfSetId\":\"string\",\"amfRegionId\":\"string\",\"guamiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"taiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tac\":\"string\"}],\"taiRangeList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tacRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]}],\"backupInfoAmfFailure\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"backupInfoAmfRemoval\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"n2InterfaceAmfInfo\":{\"ipv4EndpointAddress\":[\"198.51.100.1\"],\"ipv6EndpointAddress\":[\"2001:db8:85a3::8a2e:370:7334\"],\"amfName\":\"string\"}},\"additionalProp2\":{\"amfSetId\":\"string\",\"amfRegionId\":\"string\",\"guamiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"taiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tac\":\"string\"}],\"taiRangeList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tacRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]}],\"backupInfoAmfFailure\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"backupInfoAmfRemoval\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"n2InterfaceAmfInfo\":{\"ipv4EndpointAddress\":[\"198.51.100.1\"],\"ipv6EndpointAddress\":[\"2001:db8:85a3::8a2e:370:7334\"],\"amfName\":\"string\"}},\"additionalProp3\":{\"amfSetId\":\"string\",\"amfRegionId\":\"string\",\"guamiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"taiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tac\":\"string\"}],\"taiRangeList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tacRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]}],\"backupInfoAmfFailure\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"backupInfoAmfRemoval\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"amfId\":\"string\"}],\"n2InterfaceAmfInfo\":{\"ipv4EndpointAddress\":[\"198.51.100.1\"],\"ipv6EndpointAddress\":[\"2001:db8:85a3::8a2e:370:7334\"],\"amfName\":\"string\"}}},\"servedSmfInfo\":{\"additionalProp1\":{\"sNssaiSmfInfoList\":[{\"sNssai\":{\"sst\":0,\"sd\":\"string\"},\"dnnSmfInfoList\":[{\"dnn\":\"string\"}]}],\"taiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tac\":\"string\"}],\"taiRangeList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tacRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]}],\"pgwFqdn\":\"string\",\"accessType\":[\"3GPP_ACCESS\"]},\"additionalProp2\":{\"sNssaiSmfInfoList\":[{\"sNssai\":{\"sst\":0,\"sd\":\"string\"},\"dnnSmfInfoList\":[{\"dnn\":\"string\"}]}],\"taiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tac\":\"string\"}],\"taiRangeList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tacRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]}],\"pgwFqdn\":\"string\",\"accessType\":[\"3GPP_ACCESS\"]},\"additionalProp3\":{\"sNssaiSmfInfoList\":[{\"sNssai\":{\"sst\":0,\"sd\":\"string\"},\"dnnSmfInfoList\":[{\"dnn\":\"string\"}]}],\"taiList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tac\":\"string\"}],\"taiRangeList\":[{\"plmnId\":{\"mcc\":\"string\",\"mnc\":\"string\"},\"tacRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]}],\"pgwFqdn\":\"string\",\"accessType\":[\"3GPP_ACCESS\"]}},\"servedUpfInfo\":{\"additionalProp1\":{\"sNssaiUpfInfoList\":[{\"sNssai\":{\"sst\":0,\"sd\":\"string\"},\"dnnUpfInfoList\":[{\"dnn\":\"string\",\"dnaiList\":[\"string\"],\"pduSessionTypes\":[\"IPV4\",\"string\"]}]}],\"smfServingArea\":[\"string\"],\"interfaceUpfInfoList\":[{\"ipv4EndpointAddresses\":[\"198.51.100.1\"],\"ipv6EndpointAddresses\":[\"2001:db8:85a3::8a2e:370:7334\"],\"endpointFqdn\":\"string\",\"networkInstance\":\"string\"}],\"iwkEpsInd\":false,\"pduSessionTypes\":[\"IPV4\",\"string\"]},\"additionalProp2\":{\"sNssaiUpfInfoList\":[{\"sNssai\":{\"sst\":0,\"sd\":\"string\"},\"dnnUpfInfoList\":[{\"dnn\":\"string\",\"dnaiList\":[\"string\"],\"pduSessionTypes\":[\"IPV4\",\"string\"]}]}],\"smfServingArea\":[\"string\"],\"interfaceUpfInfoList\":[{\"ipv4EndpointAddresses\":[\"198.51.100.1\"],\"ipv6EndpointAddresses\":[\"2001:db8:85a3::8a2e:370:7334\"],\"endpointFqdn\":\"string\",\"networkInstance\":\"string\"}],\"iwkEpsInd\":false,\"pduSessionTypes\":[\"IPV4\",\"string\"]},\"additionalProp3\":{\"sNssaiUpfInfoList\":[{\"sNssai\":{\"sst\":0,\"sd\":\"string\"},\"dnnUpfInfoList\":[{\"dnn\":\"string\",\"dnaiList\":[\"string\"],\"pduSessionTypes\":[\"IPV4\",\"string\"]}]}],\"smfServingArea\":[\"string\"],\"interfaceUpfInfoList\":[{\"ipv4EndpointAddresses\":[\"198.51.100.1\"],\"ipv6EndpointAddresses\":[\"2001:db8:85a3::8a2e:370:7334\"],\"endpointFqdn\":\"string\",\"networkInstance\":\"string\"}],\"iwkEpsInd\":false,\"pduSessionTypes\":[\"IPV4\",\"string\"]}},\"servedPcfInfo\":{\"additionalProp1\":{\"dnnList\":[\"string\"],\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"rxDiamHost\":\"string\",\"rxDiamRealm\":\"string\"},\"additionalProp2\":{\"dnnList\":[\"string\"],\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"rxDiamHost\":\"string\",\"rxDiamRealm\":\"string\"},\"additionalProp3\":{\"dnnList\":[\"string\"],\"supiRanges\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"rxDiamHost\":\"string\",\"rxDiamRealm\":\"string\"}},\"servedBsfInfo\":{\"additionalProp1\":{\"dnnList\":[\"string\"],\"ipDomainList\":[\"string\"],\"ipv4AddressRanges\":[{\"start\":\"198.51.100.1\",\"end\":\"198.51.100.1\"}],\"ipv6PrefixRanges\":[{\"start\":\"2001:db8:abcd:12::0/64\",\"end\":\"2001:db8:abcd:12::0/64\"}]},\"additionalProp2\":{\"dnnList\":[\"string\"],\"ipDomainList\":[\"string\"],\"ipv4AddressRanges\":[{\"start\":\"198.51.100.1\",\"end\":\"198.51.100.1\"}],\"ipv6PrefixRanges\":[{\"start\":\"2001:db8:abcd:12::0/64\",\"end\":\"2001:db8:abcd:12::0/64\"}]},\"additionalProp3\":{\"dnnList\":[\"string\"],\"ipDomainList\":[\"string\"],\"ipv4AddressRanges\":[{\"start\":\"198.51.100.1\",\"end\":\"198.51.100.1\"}],\"ipv6PrefixRanges\":[{\"start\":\"2001:db8:abcd:12::0/64\",\"end\":\"2001:db8:abcd:12::0/64\"}]}},\"servedChfInfo\":{\"additionalProp1\":{\"supiRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"plmnRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]},\"additionalProp2\":{\"supiRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"plmnRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]},\"additionalProp3\":{\"supiRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"gpsiRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}],\"plmnRangeList\":[{\"start\":\"string\",\"end\":\"string\",\"pattern\":\"string\"}]}}},\"customInfo\":{},\"recoveryTime\":\"2020-07-18T15:00:30.867Z\",\"nfServicePersistence\":false,\"nfServices\":[{\"serviceInstanceId\":\"string\",\"versions\":[{\"apiVersionInUri\":\"string\",\"apiFullVersion\":\"string\",\"expiry\":\"2020-07-18T15:00:30.867Z\"}],\"fqdn\":\"string\",\"interPlmnFqdn\":\"string\",\"ipEndPoints\":[{\"ipv4Address\":\"198.51.100.1\",\"ipv6Address\":\"2001:db8:85a3::8a2e:370:7334\",\"port\":0}],\"apiPrefix\":\"string\",\"defaultNotificationSubscriptions\":[{\"callbackUri\":\"string\"}],\"allowedPlmns\":[{\"mcc\":\"string\",\"mnc\":\"string\"}],\"allowedNfTypes\":[\"NRF\",\"string\"],\"allowedNfDomains\":[\"string\"],\"allowedNssais\":[{\"sst\":0,\"sd\":\"string\"}],\"priority\":0,\"capacity\":0,\"load\":0,\"recoveryTime\":\"2020-07-18T15:00:30.867Z\",\"chfServiceInfo\":{\"primaryChfServiceInstance\":\"string\",\"secondaryChfServiceInstance\":\"string\"},\"supportedFeatures\":\"string\"}],\"nfProfileChangesSupportInd\":false,\"defaultNotificationSubscriptions\":[{\"callbackUri\":\"string\"}]}"`;
    curl.Command = command;
    const stdout = await curl.execute();
    expect(curl.Response.StatusCode).toEqual(200);
    done();
  });
});
